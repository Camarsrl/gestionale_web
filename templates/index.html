{% extends "layout.html" %}
{% block content %}
<div class="card mb-4">
    <div class="card-header">Filtri Ricerca</div>
    <div class="card-body">
        <form method="GET" action="{{ url_for('index') }}">
            <div class="row g-2">
                <div class="col-md-1"><label class="form-label">ID</label><input type="text" name="id" class="form-control form-control-sm" value="{{ filters.id or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Cod.Art.</label><input type="text" name="codice_articolo" class="form-control form-control-sm" value="{{ filters.codice_articolo or '' }}"></div>
                <div class="col-md-3"><label class="form-label">Descriz.</label><input type="text" name="descrizione" class="form-control form-control-sm" value="{{ filters.descrizione or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Cliente</label><input type="text" name="cliente" class="form-control form-control-sm" value="{{ filters.cliente or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Commessa</label><input type="text" name="commessa" class="form-control form-control-sm" value="{{ filters.commessa or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Ordine</label><input type="text" name="ordine" class="form-control form-control-sm" value="{{ filters.ordine or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Data Ingr. Da:</label><input type="date" name="data_ingresso_da" class="form-control form-control-sm" value="{{ filters.data_ingresso_da or '' }}"></div>
                <div class="col-md-2"><label class="form-label">Data Ingr. A:</label><input type="date" name="data_ingresso_a" class="form-control form-control-sm" value="{{ filters.data_ingresso_a or '' }}"></div>
                 <div class="col-md-2"><label class="form-label">Posizione</label><input type="text" name="posizione" class="form-control form-control-sm" value="{{ filters.posizione or '' }}"></div>
                 <div class="col-md-2"><label class="form-label">Stato</label><input type="text" name="stato" class="form-control form-control-sm" value="{{ filters.stato or '' }}"></div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-sm btn-primary">Applica Filtri</button>
                <a href="{{ url_for('index') }}" class="btn btn-sm btn-secondary">Pulisci</a>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <div class="mb-3">
            <button class="btn btn-sm btn-outline-primary" id="btn-buono">Crea Buono</button>
            <button class="btn btn-sm btn-outline-primary" id="btn-ddt">Crea DDT</button>
            <button class="btn btn-sm btn-outline-secondary" id="btn-edit-multiple">Modifica Selez.</button>
            <button class="btn btn-sm btn-outline-secondary" id="btn-duplicate">Duplica Selez.</button>
            <button class="btn btn-sm btn-outline-secondary" id="btn-create-label">Crea Etichetta</button>
            <button class="btn btn-sm btn-outline-danger float-end" id="btn-delete-selected">Elimina Selez.</button>
        </div>
        <div class="table-responsive">
            <table class="table table-sm table-hover" style="font-size: 0.8rem; white-space: nowrap;">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="select-all"></th>
                        <th>Azioni</th>
                        <th>ID</th>
                        <th>Codice Articolo</th>
                        <th>Descrizione</th>
                        <th>Cliente</th>
                        <th>Commessa</th>
                        <th>N. Colli</th>
                        <th>Peso</th>
                        <th>M2</th>
                        <th>M3</th>
                        <th>Posizione</th>
                        <th>Stato</th>
                    </tr>
                </thead>
                <tbody>
                    {% for art in articoli %}
                    <tr>
                        <td onclick="event.stopPropagation();"><input type="checkbox" class="articolo-checkbox" value="{{ art.id }}"></td>
                        <td><a href="{{ url_for('edit_articolo', id=art.id) }}" class="btn btn-xs btn-outline-primary">Modifica</a></td>
                        <td>{{ art.id }}</td>
                        <td>{{ art.codice_articolo }}</td>
                        <td>{{ art.descrizione }}</td>
                        <td>{{ art.cliente }}</td>
                        <td>{{ art.commessa }}</td>
                        <td>{{ art.n_colli }}</td>
                        <td>{{ art.peso }}</td>
                        <td>{{ art.m2 }}</td>
                        <td>{{ art.m3 }}</td>
                        <td>{{ art.posizione }}</td>
                        <td><span class="badge bg-{{ 'success' if art.stato == 'In giacenza' else 'secondary' }}">{{ art.stato }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// ... (Tutto il codice JavaScript della risposta precedente va qui)
// Aggiungi la gestione per i nuovi pulsanti
document.getElementById('btn-duplicate').addEventListener('click', function() { /* ... */ });
document.getElementById('btn-create-label').addEventListener('click', function() { /* ... */ });
</script>
{% endblock %}
