{% extends "layout.html" %}

{% block content %}
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0">Filtri Ricerca</h5>
    </div>
    <div class="card-body">
        <form method="GET" action="{{ url_for('index') }}">
            <div class="row g-3">
                <div class="col-md-2"><input type="text" name="id" class="form-control form-control-sm" placeholder="ID..." value="{{ filters.id or '' }}"></div>
                <div class="col-md-2"><input type="text" name="codice_articolo" class="form-control form-control-sm" placeholder="Cod. Articolo..." value="{{ filters.codice_articolo or '' }}"></div>
                <div class="col-md-4"><input type="text" name="descrizione" class="form-control form-control-sm" placeholder="Descrizione..." value="{{ filters.descrizione or '' }}"></div>
                <div class="col-md-2"><input type="text" name="cliente" class="form-control form-control-sm" placeholder="Cliente..." value="{{ filters.cliente or '' }}"></div>
                <div class="col-md-2"><input type="text" name="commessa" class="form-control form-control-sm" placeholder="Commessa..." value="{{ filters.commessa or '' }}"></div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-sm btn-primary">Applica Filtri</button>
                <a href="{{ url_for('index') }}" class="btn btn-sm btn-secondary">Pulisci Filtri</a>
            </div>
        </form>
    </div>
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Giacenze Magazzino ({{ articoli|length }} risultati)</h4>
    <div>
        <a href="{{ url_for('add_articolo') }}" class="btn btn-success">Aggiungi Articolo</a>
        </div>
</div>

<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-sm table-hover" style="font-size: 0.85rem;">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="select-all"></th>
                        <th>ID</th>
                        <th>Codice Articolo</th>
                        <th>Descrizione</th>
                        <th>Cliente</th>
                        <th>Commessa</th>
                        <th>N. Colli</th>
                        <th>Peso</th>
                        <th>Posizione</th>
                        <th>Stato</th>
                        <th>Data Ingresso</th>
                        <th>N. DDT Uscita</th>
                    </tr>
                </thead>
                <tbody>
                    {% for art in articoli %}
                    <tr>
                        <td><input type="checkbox" class="articolo-checkbox" value="{{ art.id }}"></td>
                        <td>{{ art.id }}</td>
                        <td>{{ art.codice_articolo }}</td>
                        <td>{{ art.descrizione }}</td>
                        <td>{{ art.cliente }}</td>
                        <td>{{ art.commessa }}</td>
                        <td>{{ art.n_colli }}</td>
                        <td>{{ art.peso }}</td>
                        <td>{{ art.posizione }}</td>
                        <td><span class="badge bg-{{ 'success' if art.stato == 'In giacenza' else 'secondary' }}">{{ art.stato }}</span></td>
                        <td>{{ art.data_ingresso.strftime('%d/%m/%Y') if art.data_ingresso else '' }}</td>
                        <td>{{ art.n_ddt_uscita }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Script per gestire la selezione multipla
</script>
{% endblock %}
